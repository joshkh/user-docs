
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Template Comparison &mdash; InterMine  documentation</title>
    
    <link rel="stylesheet" href="../../_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="InterMine  documentation" href="../../index.html" />
    <link rel="up" title="Data Integrity Checks" href="index.html" />
    <link rel="next" title="Acceptance Tests" href="acceptance-tests.html" />
    <link rel="prev" title="Data Integrity Checks" href="index.html" /><!-- syntax highlighting -->
<link href="../../_static/pygments/radek.css" rel="stylesheet">
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="acceptance-tests.html" title="Acceptance Tests"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Data Integrity Checks"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">InterMine  documentation</a> &raquo;</li>
          <li><a href="../index.html" >Database</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Data Integrity Checks</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Template Comparison</a><ul>
<li><a class="reference internal" href="#python-script">Python Script</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#invocation">Invocation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#perl-script">Perl Script</a><ul>
<li><a class="reference internal" href="#id1">Dependencies</a></li>
<li><a class="reference internal" href="#id2">Invocation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#results">Results</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Data Integrity Checks</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="acceptance-tests.html"
                        title="next chapter">Acceptance Tests</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/database/data-integrity-checks/template-comparison.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="template-comparison">
<h1>Template Comparison<a class="headerlink" href="#template-comparison" title="Permalink to this headline">¶</a></h1>
<p>There are template comparison scripts available under <cite>intermine/scripts</cite>, that will run queries against the templates publicly available in a mine or a pair of mines. The purpose of these scripts is to:</p>
<blockquote>
<div><ul class="simple">
<li>Test that all templates run.</li>
<li>In the case of multiple mines, check that updates haven&#8217;t radically changed the results.</li>
</ul>
</div></blockquote>
<p>The scripts present their results on standard out, with the option to have them emailed upon completion of the comparison. To have results emailed out, you should have set up and installed <cite>sendmail</cite> on the machine running the comparison.</p>
<p>Scripts are available in Perl and Python. Installation of the Perl modules requires the installation of various dependencies, so many users may find the Python versions easier to install, since these
have fewer dependencies.</p>
<div class="section" id="python-script">
<h2>Python Script<a class="headerlink" href="#python-script" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>This script will run on <cite>cPython</cite> 2.5-2.7, <cite>pypy</cite> and <cite>jython</cite>. It requires the installation of the intermine client module, which can be installed from <a class="reference external" href="http://pypi.python.org">http://pypi.python.org</a> PyPi with the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo easy_install intermine
</pre></div>
</div>
</div>
<div class="section" id="invocation">
<h3>Invocation<a class="headerlink" href="#invocation" title="Permalink to this headline">¶</a></h3>
<p>The script can be invoked most simply against a single mine as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python compare_templates_for_releases.py www.flymine.org/flymine
</pre></div>
</div>
<p>To have results emailed, add your email address:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python compare_templates_for_releases.py www.flymine.org/flymine you@your.host.org
</pre></div>
</div>
<p>Optionally set a &#8216;&#8217;from&#8217;&#8217; address:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python compare_templates_for_releases.py www.flymine.org/flymine you@your.host.org noreply@blackhole.net
</pre></div>
</div>
<p>Comparing against two mines is as above, except you simply need to add a second service location:</p>
<div class="highlight-bash"><div class="highlight"><pre>python compare_templates_for_releases.py www.flymine.org/flymine beta.flymine.org/beta you@your.host.org
</pre></div>
</div>
</div>
</div>
<div class="section" id="perl-script">
<h2>Perl Script<a class="headerlink" href="#perl-script" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Dependencies<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>The Perl script depends on the following modules:</p>
<ul class="simple">
<li><cite>Webservice::InterMine</cite> - the InterMine client library.</li>
<li><cite>Email::Valid</cite> - Optional email validation.</li>
<li><cite>List::Util</cite> - Core perl list extensions. [most systems will have this already]</li>
</ul>
<p>These can be installed with the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo cpan Webservice::InterMine Email::Valid List::Util
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Invocation<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>You can run the script to compare two mines, or you can run the script to simply run all the templates in a mine.</p>
<p>Compare two mines, use one email address for both to and from</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./compare_templates_for_releases mine-A mine-B email-address
</pre></div>
</div>
<p>Compare one mine to itself, use one email address for both to and from</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./compare_templates_for_releases mine-A email-address
</pre></div>
</div>
</div>
</div>
<div class="section" id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>The resulting email will look like this:</p>
<div class="highlight-python"><pre>----------------------------------------------------------------------
-----------------------------------In Both: Diff &gt;= 10%
BDGP_Gene                                         release-beta:     260, release-28.0:      62, diff:  76%
ChromLocation_CRMOverlappingTFBindingsite         release-beta:      42, release-28.0:     213, diff:  80%

----------------------------------------------------------------------
-----------------------------------Only in 28.0:
ChromosomeLocation_Tiffin                               8
Disease_GeneOrthologue                                363
ESTclone_LocationOverlappingGeneOrthologue_new         93
ESTclone_LocationOverlappingGeneStructure               4
Gene_Inparalogue                                       11
Gene_Tiffin                                           156
Probe_Gene                                              1
TiffinBSmotif_expressionTerm                           49
TiffinBSmotif_genes                                  1356
TiffinBSmotif_locations                                23
----------------------------------------------------------------------
-----------------------------------Only in beta:
Amplicon_RNAiResults                                   39
Gene_AdjacentGene_FlyAtlas_downstream                   0
Gene_OverlapppingGenes                                  1
Genes_Publications                                 126002
Organism_interologs                                   278
--------------------------------------------------In Both: Diff &lt; 10%
All_Genes_In_Organism_To_Publications             release-beta:  126002, release-28.0:  121503, diff:   4%
AlleleClass_Allele                                release-beta:    2132, release-28.0:    2117, diff:   1%</pre>
</div>
<ol class="arabic simple">
<li>&#8216;&#8217;&#8216;In Both: Diff &gt;= 10%&#8217;&#8216;&#8217; - templates run in both mines and result counts returned were very different.</li>
<li>&#8216;&#8217;&#8216;Only in&#8217;&#8216;&#8217; - template was found in one mine and not the other.</li>
<li>&#8216;&#8217;&#8216;In Both: Diff &lt; 10%&#8217;&#8216;&#8217; - template run in both mines and results returned were different.  It&#8217;s probably safe to assume these are okay.</li>
</ol>
<span class="target" id="index-0"></span></div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="acceptance-tests.html" title="Acceptance Tests"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Data Integrity Checks"
             >previous</a> |</li>
        <li><a href="../../index.html">InterMine  documentation</a> &raquo;</li>
          <li><a href="../index.html" >Database</a> &raquo;</li>
          <li><a href="index.html" >Data Integrity Checks</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
                &copy; Copyright 2012, University of Cambridge.
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>